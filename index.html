<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 10px; }
        .item { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #eee; }
    </style>
</head>
<body>
    <div id="cart-content">Loading...</div>
    
    <script>
        // Listen for messages from Google Sites
        window.addEventListener("message", function(event) {
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            
            if (event.data.type === "ADD") {
                cart.push(event.data.product);
                localStorage.setItem('cart', JSON.stringify(cart));
            }
            
            if (event.data.type === "GET") {
                // Send the cart data back to Google Sites
                window.parent.postMessage({type: "CART_DATA", cart: cart}, "*");
            }
            render();
        });

        function render() {
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const display = document.getElementById('cart-content');
            if (cart.length === 0) { display.innerHTML = "Cart is empty"; return; }
            display.innerHTML = cart.map(i => `<div class="item"><span>${i.name}</span><span>$${i.price}</span></div>`).join('');
        }
        render();
    </script>
</body>
</html>
